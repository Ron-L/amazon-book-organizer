try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2edafdd1-06c5-487a-8090-719732e68d7f",e._sentryDebugIdIdentifier="sentry-dbid-2edafdd1-06c5-487a-8090-719732e68d7f")}catch(e){}{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{};e._sentryModuleMetadata=e._sentryModuleMetadata||{},e._sentryModuleMetadata[new e.Error().stack]=Object.assign({},e._sentryModuleMetadata[new e.Error().stack],{"_sentryBundlerPluginAppKey:anthropic-apps":!0})}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48579],{0x4339cba:(e,n,i)=>{i.d(n,{NW:()=>a,un:()=>t});var a=function(e){return e.MONTHLY="monthly",e.YEARLY="yearly",e}({}),t=function(e){return e.FIVE_X="max_5x",e.TWENTY_X="max_20x",e}({})},0x2771fcb3:(e,n,i)=>{i.d(n,{Nk:()=>_,bf:()=>m,fp:()=>g,y0:()=>v});var a=i(0x12c9046cd),t=i(0x14de19ae8),u=i(0x139b5e710),r=i(0x1016c6ed2),l=i(0x49fac030),s=i(0x17e725145),d=i(0xfc89b4a4),o=i(0x17ed9ae38),c=i(0x22be9474c);let y=function(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",{activeOrganization:i}=(0,t.YL)(),u=new URLSearchParams;"owners_admins"===n&&(u.append("roles[]","owner"),u.append("roles[]","primary_owner"),u.append("roles[]","membership_admin"));let r=u.toString(),s="/api/organizations/".concat(null!=(e=null==i?void 0:i.uuid)?e:"","/members").concat(r?"?".concat(r):"");return(0,a.Sk)(s,{enabled:!!(null==i?void 0:i.uuid)&&(i.capabilities.includes("api")||i.capabilities.includes("raven")),queryKey:[l.si,{orgUuid:null==i?void 0:i.uuid,roleFilter:n}],staleTime:0})},_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",n=y(e),i=(0,o.dd)(),a=(0,t.zm)(),u=(0,d.useMemo)(()=>{if(!i||!n.data)return n.data;let e=a?"enterprise_standard":"team_standard";return n.data.map(n=>({...n,seat_tier:n.seat_tier||e}))},[i,n.data,a]);return{...n,data:u}},v=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:i}=(0,t.YL)(),u=(0,s.useQueryClient)();return(0,a.L2)(n=>{var a;return"/api/organizations/".concat(null!=(a=null==i?void 0:i.uuid)?a:"","/members/").concat(e||n.memberUuid)},"PUT",{...n,meta:{errorMessage:"There was an error updating the user.",...n.meta},async onSuccess(){for(var e,a=arguments.length,t=Array(a),r=0;r<a;r++)t[r]=arguments[r];await Promise.all([u.invalidateQueries({queryKey:[l.si,{orgUuid:null==i?void 0:i.uuid}]}),u.invalidateQueries({queryKey:[l.ZD,{orgUuid:null==i?void 0:i.uuid}]}),u.invalidateQueries({queryKey:[l.rx]}),u.invalidateQueries({queryKey:[l.cz]})]),await (null==(e=n.onSuccess)?void 0:e.call(n,...t))}})},p=function(){var e;let{offset:n=0,limit:i=30,search:u="",roleFilter:r="all",enabled:s=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:d}=(0,t.YL)(),o=new URLSearchParams({offset:n.toString(),limit:i.toString()});return u&&o.append("search",u),"owners_admins"===r&&(o.append("roles[]","owner"),o.append("roles[]","primary_owner"),o.append("roles[]","membership_admin")),(0,a.Sk)("/api/organizations/".concat(null!=(e=null==d?void 0:d.uuid)?e:"","/members_v2?").concat(o),{enabled:s&&!!(null==d?void 0:d.uuid)&&(d.capabilities.includes("api")||d.capabilities.includes("raven")),queryKey:[l.rx,{orgUuid:null==d?void 0:d.uuid,offset:n,limit:i,search:u,roleFilter:r}],staleTime:0})},m=function(){let{offset:e=0,limit:n=30,search:i="",roleFilter:a="all",enabled:u=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=p({offset:e,limit:n,search:i,roleFilter:a,enabled:u}),l=(0,o.dd)(),s=(0,t.zm)(),c=(0,d.useMemo)(()=>{if(!l||!r.data)return r.data;let e=s?"enterprise_standard":"team_standard";return{...r.data,data:r.data.data.map(n=>"member"===n.type?{...n,member:{...n.member,seat_tier:n.member.seat_tier||e}}:"invite"===n.type?{...n,invite:{...n.invite,seat_tier:n.invite.seat_tier||e}}:n)}},[l,r.data,s]);return{...r,data:c}},g=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=(0,s.useQueryClient)(),{addError:d}=(0,u.Y)(),o=(0,c.kP)(),y="uuid"in n?n.uuid:n.account.uuid,_="email_address"in n?n.email_address:n.account.email_address;return(0,a.L2)("/api/organizations/".concat(e,"/members/").concat(y),"DELETE",{...i,meta:{noToast:!0},async onSuccess(){for(var n,a=arguments.length,u=Array(a),r=0;r<a;r++)u[r]=arguments[r];await t.invalidateQueries({queryKey:[l.si,{orgUuid:e}]}),await t.invalidateQueries({queryKey:[l.rx]}),t.invalidateQueries({queryKey:[l.MJ,e]}),t.invalidateQueries({queryKey:[l._S,e]}),await (null==(n=i.onSuccess)?void 0:n.call(i,...u))},onError(e){var n,i;e instanceof r.LG&&(null==(i=e.extra)||null==(n=i.details)?void 0:n.type)==="seat_minimum_reached"?d("You cannot go below ".concat(o," members.")):d("There was an error removing ".concat(_," from the organization."),{error:e})}})}},0xea143dbe:(e,n,i)=>{i.d(n,{BF:()=>m,UV:()=>_,oF:()=>p,of:()=>y,tH:()=>v});var a=i(0x12c9046cd),t=i(0x14de19ae8),u=i(0x139b5e710),r=i(0x1016c6ed2),l=i(0x49fac030),s=i(0x17e725145),d=i(0xfc89b4a4),o=i(0x17ed9ae38),c=i(0x22be9474c);let y=e=>{let n=(e=>{var n;let{activeOrganization:i}=(0,t.YL)(),u=new URLSearchParams;e&&e.length>0&&e.forEach(e=>u.append("roles[]",e));let r=u.toString(),s="/api/organizations/".concat(null!=(n=null==i?void 0:i.uuid)?n:"","/invites").concat(r?"?".concat(r):"");return(0,a.Sk)(s,{enabled:!!(null==i?void 0:i.uuid)&&(i.capabilities.includes("api")||i.capabilities.includes("raven")),queryKey:[l.ZD,{orgUuid:null==i?void 0:i.uuid,roles:e}],staleTime:0})})(e),i=(0,o.dd)(),{activeOrganization:u}=(0,t.YL)(),r=(0,d.useMemo)(()=>{if(!i||!n.data)return n.data;let e=(null==u?void 0:u.capabilities.includes("commercial_use"))?"enterprise_standard":"team_standard";return n.data.map(n=>({...n,seat_tier:n.seat_tier||e}))},[i,n.data,null==u?void 0:u.capabilities]);return{...n,data:r}},_=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,s.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(e,"/invites"),"POST",{...n,async onSuccess(){for(var a,t=arguments.length,u=Array(t),r=0;r<t;r++)u[r]=arguments[r];await i.invalidateQueries({queryKey:[l.ZD,{orgUuid:e}]}),await i.invalidateQueries({queryKey:[l.rx]}),i.invalidateQueries({queryKey:[l.MJ,e]}),i.invalidateQueries({queryKey:[l._S,e]}),await (null==(a=n.onSuccess)?void 0:a.call(n,...u))}})},v=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,s.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(e,"/invites/bulk"),"POST",{...n,async onSuccess(){for(var a,t=arguments.length,u=Array(t),r=0;r<t;r++)u[r]=arguments[r];await i.invalidateQueries({queryKey:[l.ZD,{orgUuid:e}]}),await i.invalidateQueries({queryKey:[l.rx]}),i.invalidateQueries({queryKey:[l.MJ,e]}),i.invalidateQueries({queryKey:[l._S,e]}),await (null==(a=n.onSuccess)?void 0:a.call(n,...u))}})},p=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=(0,s.useQueryClient)(),{addError:d}=(0,u.Y)(),o=(0,c.kP)();return(0,a.L2)("/api/organizations/".concat(e,"/invites/").concat(n),"DELETE",{...i,meta:{noToast:!0},async onSuccess(){for(var n,a=arguments.length,u=Array(a),r=0;r<a;r++)u[r]=arguments[r];await t.invalidateQueries({queryKey:[l.ZD,{orgUuid:e}]}),await t.invalidateQueries({queryKey:[l.rx]}),t.invalidateQueries({queryKey:[l.MJ,e]}),t.invalidateQueries({queryKey:[l._S,e]}),await (null==(n=i.onSuccess)?void 0:n.call(i,...u))},onError(e){var n,i;e instanceof r.LG&&(null==(i=e.extra)||null==(n=i.details)?void 0:n.type)==="seat_minimum_reached"?d("You cannot go below ".concat(o," members.")):d("There was an error revoking the invite.",{error:e})}})},m=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=(0,s.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(e,"/invites/").concat(n),"PUT",{...i,async onSuccess(){for(var n,a=arguments.length,u=Array(a),r=0;r<a;r++)u[r]=arguments[r];await t.invalidateQueries({queryKey:[l.ZD,{orgUuid:e}]}),await t.invalidateQueries({queryKey:[l.rx]}),await (null==(n=i.onSuccess)?void 0:n.call(i,...u))}})}},0x17ed9ae38:(e,n,i)=>{i.d(n,{Dt:()=>l,G6:()=>o,dD:()=>d,dd:()=>r,mk:()=>y,vm:()=>s});var a=i(0x14de19ae8),t=i(0xac309a83),u=i(0xfc89b4a4);let r=()=>{let e=(0,t.fS)("c4w_contracted_shebang"),n=(0,t.fS)("c4w_self_serve_shebang"),i=(0,t.fS)("aws_marketplace_seat_limit_enforcement"),{activeOrganization:r}=(0,a.YL)(),l=null==r?void 0:r.billing_type;return(0,u.useMemo)(()=>(!!e||!!n)&&("stripe_subscription_contracted"===l?e:"aws_marketplace"===l?i:(!l||"none"===l||"stripe_subscription"===l)&&n),[e,n,l,i])},l=(e,n)=>{var i,a,t,u,r;let l=null!=(t=null==n?void 0:n.some(e=>"enterprise_usage_based"===e.seat_tier||"enterprise_usage_based_chat"===e.seat_tier))&&t,s=(null!=(u=null==e||null==(i=e.seat_tier_quantities)?void 0:i.enterprise_usage_based)?u:0)>0||(null!=(r=null==e||null==(a=e.seat_tier_quantities)?void 0:a.enterprise_usage_based_chat)?r:0)>0;return l||s},s=(e,n)=>{if(n){if("enterprise_standard"===e||"c4e_standard_seat"===e||"standard"===e)return"c4e_standard_seat";if("enterprise_tier_1"===e||"c4e_tier_1_seat"===e||"tier_1"===e)return"c4e_tier_1_seat";if("enterprise_usage_based"===e||"c4e_usage_based_seat"===e||"usage_based"===e)return"c4e_usage_based_seat";if("enterprise_usage_based_chat"===e||"c4e_usage_based_chat_seat"===e||"usage_based_chat"===e)return"c4e_usage_based_chat_seat"}else{if("team_standard"===e||"team_plan_standard_seat"===e||"standard"===e)return"team_plan_standard_seat";if("team_tier_1"===e||"team_plan_tier_1_seat"===e||"tier_1"===e)return"team_plan_tier_1_seat"}return null},d=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],t=arguments.length>4?arguments[4]:void 0;if(!(null==e?void 0:e.seat_tier_quantities))return[];let u=[],r=new Set,d=a&&l(e,t);if(Object.entries(e.seat_tier_quantities).forEach(e=>{let[i,a]=e,t=s(i,n);"unassigned"!==i&&(!d||(null==t?void 0:t.includes("usage_based"))||0!==a)&&t&&"number"==typeof a&&(u.push({itemType:t,currentSeats:a,adjustedSeats:a}),r.add(t))}),!d){let e=n?"c4e_standard_seat":"team_plan_standard_seat",i=n?"c4e_tier_1_seat":"team_plan_tier_1_seat";r.has(e)||u.push({itemType:e,currentSeats:0,adjustedSeats:0}),r.has(i)||u.push({itemType:i,currentSeats:0,adjustedSeats:0})}if(n&&(i||d)){let e="c4e_usage_based_seat",n="c4e_usage_based_chat_seat";r.has(e)||u.push({itemType:e,currentSeats:0,adjustedSeats:0}),r.has(n)||u.push({itemType:n,currentSeats:0,adjustedSeats:0})}return u},o=(e,n,i,a)=>{let t=[...e];if("unassigned"!==n&&"unassigned"!==i&&(!a||c(n,i))){let e=s(n,a);if(e){let n=t.find(n=>n.itemType===e);n&&n.adjustedSeats>0&&(n.adjustedSeats-=1)}}if("unassigned"!==i){let e=s(i,a);if(e){let n=t.find(n=>n.itemType===e);n?n.adjustedSeats+=1:t.push({itemType:e,currentSeats:0,adjustedSeats:1})}}return t},c=(e,n)=>"unassigned"===e&&"unassigned"!==n||("team_standard"===e||"enterprise_standard"===e)&&("team_tier_1"===n||"enterprise_tier_1"===n),y=(e,n)=>{if("unassigned"===n&&"unassigned"!==e)return!0;if("unassigned"===e)return!1;let i=e.includes("tier_1")||e.includes("premium")||"enterprise_usage_based"===e,a=n.includes("standard")&&!n.includes("tier_1")&&!n.includes("premium")&&"enterprise_usage_based"!==n;return!!i&&!!a}},0x1bdad8807:(e,n,i)=>{i.d(n,{nW:()=>g,bN:()=>b,Ri:()=>v,Ak:()=>y,ib:()=>m});var a=i(0x78b33fbd),t=i(0xfc89b4a4),u=i(0x49fac030),r=i(0x12c9046cd),l=i(0xa5acf583),s=i(0x14de19ae8),d=i(0xc6857cab);let o=async e=>{if(d.env.NEXT_PUBLIC_DISABLE_PAYMENTS)return Promise.resolve(null);let{loadStripe:n}=await i.e(13508).then(i.bind(i,0x2282f58c4));return n(e)},c=new Set(["AT","BE","BG","CH","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GR","HR","HU","IE","IS","IT","LI","LT","LU","LV","MT","NL","NO","PL","PT","RO","SE","SI","SK"]);function y(e){let n=(0,l._r)(),i=(0,a.useDynamicConfig)("always_use_us_sandbox").get("always_use_us_sandbox",!1),u=(0,a.useDynamicConfig)("meb_enabled").get("meb_capability_enabled",!1);return(0,t.useMemo)(()=>i?"us_sandbox":u?e&&c.has(e.toUpperCase())?"ie":n.stripePublishableKeySandbox?"us_sandbox":"us":"us",[i,e,u,n.stripePublishableKeySandbox])}let _=["ar","bg","cs","da","de","el","en","en-AU","en-CA","en-NZ","en-GB","es","es-ES","es-419","et","fi","fil","fr","fr-CA","fr-FR","he","hu","hr","id","it","it-IT","ja","ko","lt","lv","ms","mt","nb","nl","no","pl","pt","pt-BR","ro","ru","sk","sl","sv","th","tr","vi","zh","zh-HK","zh-TW"],v=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0,{activeOrganization:a}=(0,s.YL)(),{data:l,mutate:d,isIdle:o}=(0,r.L2)("/api/stripe/".concat(null==a?void 0:a.uuid,"/intent"),"POST",{enabled:!!(null==a?void 0:a.uuid),retry:2,retryDelay:2e3,mutationKey:[u.$k,null==a?void 0:a.uuid,i]});return(0,t.useEffect)(()=>{o&&e&&d({country:null!=n?n:null})},[d,o,e,n]),l},p={};function m(e){return g(e,(0,l._r)())}function g(e,n){let i="ie"===e?n.stripePublishableKeyIreland:"us_sandbox"===e&&n.stripePublishableKeySandbox?n.stripePublishableKeySandbox:n.stripePublishableKey;return p[i]||(p[i]=o(i)),p[i]}let b=e=>{if(_.includes(e))return e;let n=e.split("-")[0];return _.includes(n)?n:"en"}},0x1cef2276b:(e,n,i)=>{i.d(n,{b:()=>r});var a=i(0xc1dd9efc),t=i(0xfc89b4a4),u=i(0x14de19ae8);function r(e){let{account:n,activeOrganization:i}=(0,u.YL)();return(0,t.useMemo)(()=>(0,a.yI)(n,i,e),[n,i,e])}},0x22be9474c:(e,n,i)=>{i.d(n,{BH:()=>c,NE:()=>m,Nf:()=>S,Nj:()=>l,QY:()=>v,U6:()=>d,VK:()=>g,b3:()=>f,iD:()=>s,k3:()=>b,kP:()=>o,q:()=>y,rX:()=>_,tX:()=>p});var a=i(0x12c9046cd),t=i(0x14de19ae8),u=i(0x49fac030),r=i(0x17e725145);let l=e=>(0,a.Sk)("/api/organizations/".concat(e),{queryKey:[u.i5,e],enabled:!!e,staleTime:3e4}),s=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid;return(0,a.Qv)(e=>{let{flagType:i}=e;return"/api/organizations/".concat(n,"/flags/").concat(i,"/dismiss")},"POST",(e,n)=>{let{flagType:i}=e;if(n)return{...n,active_flags:n.active_flags.filter(e=>e.type!==i)}},{queryKey:[u.i5,n]})},d=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid,i=(0,t.mV)();return(0,a.Sk)("/api/organizations/".concat(n,"/members_limit"),{queryKey:[u.hz,n],enabled:!!n&&i,staleTime:0})},o=()=>{var e;let{data:n}=d();return null!=(e=null==n?void 0:n.minimum_seats)?e:5},c=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid,i=(0,r.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/contracted_quantity"),"PUT",{enabled:!!n,onSuccess:async()=>{await i.invalidateQueries({queryKey:[u.hz,n]})}})},y=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid;return(0,a.Sk)("/api/organizations/".concat(n,"/public_projects_enabled"),{queryKey:[u._d,n],enabled:!!n,staleTime:0})},_=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid;return(0,a.Sk)("/api/organizations/".concat(n,"/feature_settings"),{queryKey:[u.RR,n],enabled:!!n,staleTime:0})},v=()=>{var e,n;let{activeOrganization:i}=(0,t.YL)(),{data:a}=l(null==i?void 0:i.uuid);return null==(n=null==a||null==(e=a.settings)?void 0:e.claude_ai_completion_feedback_enabled)||n},p=()=>{var e,n;let{activeOrganization:i}=(0,t.YL)(),{data:a}=l(null==i?void 0:i.uuid);return null==(n=null==a||null==(e=a.settings)?void 0:e.claude_ai_integration_sharing_enabled)||n};function m(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:i}=(0,t.YL)(),l="/api/organizations/".concat(null!=(e=null==i?void 0:i.uuid)?e:""),s=(0,r.useQueryClient)();return(0,a.L2)(l,"PUT",{enabled:!!i,...n,async onSuccess(){for(var e,a=arguments.length,t=Array(a),r=0;r<a;r++)t[r]=arguments[r];await Promise.all([s.invalidateQueries({queryKey:[u.Rw]}),s.invalidateQueries({queryKey:[u.i5]}),s.invalidateQueries({queryKey:[u.RR,null==i?void 0:i.uuid]}),s.invalidateQueries({queryKey:[u.En,null==i?void 0:i.uuid]})]),await (null==(e=n.onSuccess)?void 0:e.call(n,...t))}})}let g=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid;return(0,a.Sk)("/api/organizations/".concat(n,"/allowed_domains"),{queryKey:[u.OX,n],enabled:!!n})},b=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,t.YL)(),i=null==n?void 0:n.uuid,l=(0,r.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(i,"/allowed_domains"),"PUT",{enabled:!!i,...e,onSuccess:async function(){for(var n,a=arguments.length,t=Array(a),r=0;r<a;r++)t[r]=arguments[r];await l.invalidateQueries({queryKey:[u.OX,i]}),await (null==(n=e.onSuccess)?void 0:n.call(e,...t))}})},f=()=>{let{activeOrganization:e}=(0,t.YL)(),n=null==e?void 0:e.uuid;return(0,a.L2)("/api/organizations/".concat(n,"/projects/request_haystack"),"POST",{enabled:!!n})},S=()=>{let{activeOrganization:e}=(0,t.YL)(),n=(0,t.mV)(),i=null==e?void 0:e.uuid;return(0,a.Sk)("/api/organizations/".concat(i,"/is_pure_usage_based"),{queryKey:["is_pure_usage_based",i],enabled:!!i&&n,staleTime:3e4})}},0x23e1b1f63:(e,n,i)=>{i.d(n,{$0:()=>x,C:()=>H,Cm:()=>es,Ew:()=>Y,Gs:()=>$,If:()=>em,Jh:()=>h,L3:()=>A,Le:()=>Q,N_:()=>el,Nb:()=>q,PI:()=>eu,PQ:()=>L,Pz:()=>S,QO:()=>ed,Qn:()=>U,Si:()=>er,UK:()=>en,Uu:()=>V,V9:()=>B,VK:()=>J,Xi:()=>O,Xt:()=>K,ZA:()=>j,_D:()=>ei,a1:()=>N,bE:()=>F,bF:()=>E,bt:()=>P,c:()=>D,cR:()=>ee,cg:()=>k,e0:()=>z,fS:()=>et,h:()=>eb,i4:()=>Z,ib:()=>e_,jH:()=>eo,jN:()=>w,kg:()=>W,lG:()=>M,ls:()=>ev,mU:()=>ep,mv:()=>eg,nc:()=>T,p$:()=>ey,rB:()=>ea,sd:()=>R,uS:()=>X,wu:()=>I,xy:()=>ec,yS:()=>G});var a=i(0x12c9046cd),t=i(0xa5acf583),u=i(0x14de19ae8),r=i(0x139b5e710),l=i(0x1bdad8807),s=i(0x1cef2276b),d=i(0x1016c6ed2),o=i(0x49fac030),c=i(0xc1dd9efc),y=i(0x78b33fbd),_=i(0x17e725145),v=i(0xfc89b4a4),p=i(0x4339cba),m=i(0xea143dbe),g=i(0x2771fcb3),b=i(0x22be9474c),f=i(0xc6857cab);function S(e){let{onSuccess:n,onError:i}=e,{activeOrganization:t}=(0,u.YL)(),{data:r,variables:l,...s}=(0,a.L2)("/api/billing/".concat(null==t?void 0:t.uuid,"/consumer_pricing"),"POST",{enabled:!!t,meta:{noToast:!0},onError:i,onSuccess:n}),[d,o]=(0,v.useState)(),[c,y]=(0,v.useState)();return(0,v.useEffect)(()=>{r&&(o(r),y(l))},[r,l]),{data:d,variables:c,...s}}function h(e){let{onError:n}=e,{activeOrganization:i}=(0,u.YL)(),{data:t,variables:r,...l}=(0,a.L2)("/api/billing/".concat(null==i?void 0:i.uuid,"/cw_pricing"),"POST",{enabled:!!i,meta:{noToast:!0},onError:n}),[s,d]=(0,v.useState)(),[o,c]=(0,v.useState)();return(0,v.useEffect)(()=>{t&&(d(t),c(r))},[t,r]),{data:s,variables:o,...l}}function Q(){var e,n,i,t;let{onSuccess:r,onError:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:s}=(0,u.YL)(),[d,o]=(0,v.useState)(null),[c,y]=(0,v.useState)(),{data:_,isPending:m,error:g,mutate:b}=(0,a.L2)("/api/billing/".concat(null==s?void 0:s.uuid,"/individual_plan_pricing/v2"),"POST",{enabled:!!s,meta:{noToast:!0},onError:l,onSuccess:r});(0,v.useEffect)(()=>{_&&y(_)},[_]);let f=c||_,S=f&&{country:f.country,currency:f.currency,price:null==(e=f.product_prices_per_billing_period)?void 0:e.max_5x_monthly,planType:p.un.FIVE_X},h=f&&{country:f.country,currency:f.currency,price:null==(n=f.product_prices_per_billing_period)?void 0:n.max_20x_monthly,planType:p.un.TWENTY_X},Q=f&&{country:f.country,currency:f.currency,price:null==(i=f.product_prices_due_today)?void 0:i.max_5x_monthly,planType:p.un.FIVE_X};return{fiveXPricing:S,twentyXPricing:h,fiveXPricingProrated:Q,twentyXPricingProrated:f&&{country:f.country,currency:f.currency,price:null==(t=f.product_prices_due_today)?void 0:t.max_20x_monthly,planType:p.un.TWENTY_X},isPending:m,error:g,fetchAllPricing:(0,v.useCallback)(e=>{o(e),e.noCache&&y(void 0),b(e)},[b]),addressParams:d}}let L=()=>{let{activeOrganization:e}=(0,u.YL)();return(0,a.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/subscription"),"PUT",{enabled:!!e})},q=()=>{let{activeOrganization:e}=(0,u.YL)();return(0,a.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/subscription/verify-payment"),"POST",{enabled:!!e})},K=()=>{let{activeOrganization:e}=(0,u.YL)();return(0,a.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/subscription/cw"),"PUT",{enabled:!!e})};function T(){let{activeOrganization:e}=(0,u.YL)();return(0,a.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/payment_method"),{enabled:!!e,queryKey:["payment-method",null==e?void 0:e.uuid],staleTime:9e5})}function w(e){var n;let{activeOrganization:i}=(0,u.YL)(),t=(0,u.h0)();return(0,a.Sk)("/api/organizations/".concat(null==i?void 0:i.uuid,"/subscription_details"),{queryKey:[o.Gn,null==i?void 0:i.uuid],staleTime:0,initialData:null==e?void 0:e.initialData,refetchOnMount:null==e||!e.forceRefetch||"always",enabled:!!i&&t&&(null==(n=null==e?void 0:e.enabled)||n),meta:{noToast:e=>e instanceof d.LG&&404===e.statusCode}})}function x(e){var n;let{activeOrganization:i}=(0,u.YL)();return(0,a.Sk)("/api/organizations/".concat(null==i?void 0:i.uuid,"/paused_subscription_details"),{queryKey:[o.dZ,null==i?void 0:i.uuid],enabled:!!i&&(null==(n=null==e?void 0:e.enabled)||n),meta:{noToast:e=>e instanceof d.LG&&404===e.statusCode}})}function Y(e){var n;let{activeOrganization:i}=(0,u.YL)();return(0,a.Sk)("/api/organizations/".concat(null==i?void 0:i.uuid,"/trial_status"),{queryKey:[o.nb,null==i?void 0:i.uuid],enabled:!!i&&(null==(n=null==e?void 0:e.enabled)||n),meta:{noToast:e=>e instanceof d.LG&&404===e.statusCode}})}function P(){let{activeOrganization:e}=(0,u.YL)(),n=(0,_.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/acknowledge_trial_end"),"POST",{enabled:!!e,meta:{noToast:!0},onSuccess:()=>{n.setQueryData([o.nb,null==e?void 0:e.uuid],e=>{if(e)return{...e,trial_end_requires_action:!1}})}})}let z=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{addError:a}=(0,r.Y)(),t=(0,_.useQueryClient)(),u=(0,m.UV)(e,{...i,async onSuccess(r,l,s){var d;if("payment_intent_client_secret"in r){let e=await n;if(!e)return void a("Stripe failed to initialize. You can try again.");let i=await e.confirmPayment({clientSecret:r.payment_intent_client_secret,redirect:"if_required"});return i.error?void a("Payment confirmation failed. You can try again.",{error:i.error}):void u.mutate(l)}t.invalidateQueries({queryKey:[o.MJ,e]}),t.invalidateQueries({queryKey:[o._S,e]}),await (null==(d=i.onSuccess)?void 0:d.call(i,r,l,s))}});return u},M=function(e,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{addError:a}=(0,r.Y)(),t=(0,_.useQueryClient)(),u=(0,m.tH)(e,{...i,async onSuccess(r,l,s){var d;if("payment_intent_client_secret"in r){let e=await n;if(!e)return void a("Stripe failed to initialize. You can try again.");let i=await e.confirmPayment({clientSecret:r.payment_intent_client_secret,redirect:"if_required"});return i.error?void a("Payment confirmation failed. You can try again.",{error:i.error}):void u.mutate(l)}t.invalidateQueries({queryKey:[o.MJ,e]}),t.invalidateQueries({queryKey:[o._S,e]}),await (null==(d=i.onSuccess)?void 0:d.call(i,r,l,s))}});return u};function C(){let{activeOrganization:e}=(0,u.YL)(),n=(0,u.mV)();return f.env.NEXT_PUBLIC_DISABLE_PAYMENTS?{data:{status:"active",cancel_at_ts:null},isLoading:!1}:(0,a.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/subscription_status"),{queryKey:[o._S,null==e?void 0:e.uuid],staleTime:0,enabled:!!e&&n,meta:{noToast:e=>e instanceof d.LG&&404===e.statusCode}})}function k(){let{data:e,isLoading:n}=C();return{isRavenTrialing:(null==e?void 0:e.status)==="trialing",isLoading:n}}function E(){let{data:e,isLoading:n}=C();return{isRavenCanceled:(null==e?void 0:e.status)==="canceled"||(null==e?void 0:e.status)==="unpaid",isLoading:n}}function U(){let{data:e,isLoading:n}=C();return{isRavenPastDue:(null==e?void 0:e.status)==="past_due",isLoading:n}}function D(){let{data:e,isLoading:n}=C();return{isRavenPendingCancellation:!!(null==e?void 0:e.cancel_at_ts),isLoading:n}}function G(){let{activeOrganization:e}=(0,u.YL)(),{isRavenCanceled:n,isLoading:i}=E(),{isRavenPastDue:a,isLoading:t}=U(),r=i||t,l=(null==e?void 0:e.billing_type)==="stripe_subscription_contracted";return{isLoading:r,canManageMembers:!r&&!n&&(l||!a)}}function O(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/end_subscription"),"PUT",{...e,onSuccess(n,a,u){var r;i.setQueryData([o.Gn,t],e=>{if(e)return{...e,plan_ending_before:"".concat(n.plan_ends_at,"T00:00:00+00:00")}}),i.invalidateQueries({queryKey:[o._S,t]}),i.invalidateQueries({queryKey:[o.MJ,t]}),i.invalidateQueries({queryKey:[o.dZ,t]}),i.invalidateQueries({queryKey:[o.Gn,t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(i,"/cancellation_survey"),"POST",{...e,enabled:!!n})}function N(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/resume_subscription"),"PUT",{...e,onSuccess(n,a,u){var r;i.setQueryData([o.Gn,t],e=>{if(e)return{...e,plan_ending_before:null}}),i.invalidateQueries({queryKey:[o._S,t]}),i.invalidateQueries({queryKey:[o.MJ,t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}function I(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(null==n?void 0:n.uuid,"/renew_subscription/cw"),"PUT",{...e,onSuccess(a,t,u){var r;a.clientSecret||(i.invalidateQueries({queryKey:[o.Gn,null==n?void 0:n.uuid]}),i.invalidateQueries({queryKey:[o._S,null==n?void 0:n.uuid]}),i.invalidateQueries({queryKey:[o.cc,null==n?void 0:n.uuid]}),i.invalidateQueries({queryKey:[o.MJ,null==n?void 0:n.uuid]})),null==(r=e.onSuccess)||r.call(e,a,t,u)},enabled:!!n})}function R(e){let{limit:n,createdSince:i,organizationUuid:t,meta:r}=e,{activeOrganization:l}=(0,u.YL)(),s=Math.round(i.toSeconds()),d=t||(null==l?void 0:l.uuid);return(0,a.Sk)("/api/stripe/".concat(d,"/invoices?limit=").concat(n,"&created_since_ts=").concat(s),{queryKey:[o.cc,d,{limit:n,created_since_ts:s}],staleTime:0,enabled:!!d,meta:r})}function J(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,u.mV)();return(0,a.Sk)("/api/stripe/".concat(null==n?void 0:n.uuid,"/upcoming_invoice"),{queryKey:[o.MJ,null==n?void 0:n.uuid],staleTime:0,enabled:!!n&&i,meta:{noToast:e=>e instanceof d.LG&&500===e.statusCode},...e})}function j(){let{activeOrganization:e}=(0,u.YL)(),n=(0,_.useQueryClient)(),i=null==e?void 0:e.uuid;return(0,a.L2)("/api/organizations/".concat(i,"/payment_method/update_latest"),"POST",{onSuccess:async e=>{let a=n.getQueryData([o.Gn,i]);a&&e?n.setQueryData([o.Gn,i],{...a,payment_method:{...e}}):await n.invalidateQueries({queryKey:[o.Gn,i]}),n.invalidateQueries({queryKey:[o._S,i]}),n.invalidateQueries({queryKey:[o.cc,i]})},meta:{noToast:!0}})}let B=150;function Z(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{client:n}=(0,y.useStatsigClient)(),{account:i}=(0,u.YL)(),a=(0,y.useDynamicConfig)("claude_teams_reduce_minimum_seat_count_cutoff_datetime");if(!e)return 5;let t=a.get("feature_launch_date","2099-12-31T00:00:00-08:00"),r=(null==i?void 0:i.created_at)?new Date(i.created_at):null,l=new Date(t);return r&&r>l?n.getExperiment("claude_teams_reduce_minimum_seat_count").get("minimum_seat_count",5):5}function V(){var e;let{data:n,isLoading:i}=(0,g.Nk)(),{data:a,isLoading:t}=(0,m.of)(),r=(0,s.b)(c.Nt.MembersManage),l=(0,s.b)(c.Nt.BillingView),{data:d}=(0,b.U6)(),{data:o}=w({enabled:l}),y=(0,u.zm)(),_=eo(),p=i||t||!n||!a||!d,f=null!=(e=null==d?void 0:d.minimum_seats)?e:5,S=p?0:n.length,h=p?0:a.filter(e=>"pending"===e.status).length,Q=S+h,L=Math.max(S+h,f),q=p?0:y?d.members_limit-Q:Math.max(f-Q,0),K=(0,v.useMemo)(()=>p||!d?null:(null==o?void 0:o.seat_tier_quantities)||d.seat_tier_quantities,[p,d,o]),T=(0,v.useMemo)(()=>{if(p||!n||!a)return{};let e={};return n.forEach(n=>{let i=n.seat_tier;e[i]=(e[i]||0)+1}),a.forEach(n=>{if("pending"===n.status){let i=n.seat_tier;e[i]=(e[i]||0)+1}}),e},[p,n,a]),x=(0,v.useMemo)(()=>!p&&n&&a?Object.fromEntries((_||[]).map(e=>{var n;let i=null!=(n=null==K?void 0:K[e])?n:0,a=T[e]||0;return[e,i-a]})):Object.fromEntries((_||[]).map(e=>[e,0])),[p,n,a,_,K,T]);if(p)return{isLoading:p,hasManageMembersPermission:r,totalMembersWithoutMinimumApplied:0,totalMembersWithMinimumApplied:0,activeMembers:0,invitedMembers:0,unclaimedMembers:0,minimumApplied:!1,minimumSeatCount:5,memberLimit:0,isUnlimited:!1,unclaimedSeatsByTier:x,standardMembers:0,enterpriseLiteMembers:0,premiumMembers:0,usageBasedMembers:0,usageBasedChatMembers:0,unassignedMembers:0,totalAssignedMembers:0};let Y=(T.team_standard||0)+(T.enterprise_standard||0),P=T.enterprise_lite||0,z=(T.team_tier_1||0)+(T.enterprise_tier_1||0),M=T.enterprise_usage_based||0,C=T.enterprise_usage_based_chat||0,k=T.unassigned||0;return{isLoading:p,hasManageMembersPermission:r,totalMembersWithoutMinimumApplied:Q,totalMembersWithMinimumApplied:L,activeMembers:S,invitedMembers:h,unclaimedMembers:q,minimumApplied:Q<f,minimumSeatCount:f,memberLimit:d.members_limit,isUnlimited:d.unlimited_members||!1,unclaimedSeatsByTier:x,standardMembers:Y,enterpriseLiteMembers:P,premiumMembers:z,usageBasedMembers:M,usageBasedChatMembers:C,unassignedMembers:k,totalAssignedMembers:Y+P+z+M+C}}function X(){var e;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:i}=(0,u.YL)(),t="/api/organizations/".concat(null!=(e=null==i?void 0:i.uuid)?e:"","/profile"),r=(0,_.useQueryClient)();return(0,a.L2)(t,"PUT",{...n,async onSuccess(){for(var e,i=arguments.length,a=Array(i),t=0;t<i;t++)a[t]=arguments[t];await r.invalidateQueries({queryKey:[o.Oi]}),await (null==(e=n.onSuccess)?void 0:e.call(n,...a))}})}let F=()=>{let{activeOrganization:e}=(0,u.YL)(),n=(0,s.b)(c.Nt.BillingView);return(0,a.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/subscription/scheduled_seat_tier_changes"),{enabled:!!e&&n,queryKey:[o.pT,null==e?void 0:e.uuid]})},W=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(null==n?void 0:n.uuid,"/subscription/cancel_scheduled_seat_tier_changes"),"PUT",{...e,onSuccess:function(){for(var a,t=arguments.length,u=Array(t),r=0;r<t;r++)u[r]=arguments[r];i.invalidateQueries({queryKey:[o.pT,null==n?void 0:n.uuid]}),i.invalidateQueries({queryKey:[o.Gn,null==n?void 0:n.uuid]}),null==(a=e.onSuccess)||a.call(e,...u)}})};function H(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/pro/upgrade_to_yearly"),"PUT",{...e,onSuccess(n,a,u){var r;i.invalidateQueries({queryKey:[o.Gn,t]}),i.invalidateQueries({queryKey:[o.dZ,t]}),i.invalidateQueries({queryKey:[o._S,t]}),i.invalidateQueries({queryKey:[o.MJ,t]}),i.invalidateQueries({queryKey:[o.cc,t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}function $(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/team/upgrade_to_annual"),"PUT",{...e,onSuccess(n,a,u){var r;i.invalidateQueries({queryKey:[o.Gn,t]}),i.invalidateQueries({queryKey:[o.dZ,t]}),i.invalidateQueries({queryKey:[o._S,t]}),i.invalidateQueries({queryKey:[o.MJ,t]}),i.invalidateQueries({queryKey:[o.cc,t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}function ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/pro/switch_billing_interval"),"PUT",{...e,onSuccess(n,a,u){var r;i.invalidateQueries({queryKey:[o.Gn,t]}),i.invalidateQueries({queryKey:[o.dZ,t]}),i.invalidateQueries({queryKey:[o._S,t]}),i.invalidateQueries({queryKey:[o.MJ,t]}),i.invalidateQueries({queryKey:[o.Oi,t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}function en(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/upgrade_to_max"),"PUT",{...e,transformVariables:e=>({max_tier:e.maxTier,promo_code:e.promoCode}),onSuccess(n,a,u){var r;i.invalidateQueries({queryKey:[o.Gn,t]}),i.invalidateQueries({queryKey:[o.dZ,t]}),i.invalidateQueries({queryKey:[o._S,t]}),i.invalidateQueries({queryKey:[o.MJ,t]}),i.invalidateQueries({queryKey:[o.cc,t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}function ei(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/downgrade_individual_claude_subscription"),"PUT",{...e,onSuccess(n,a,u){var r;if(n.downgrade_timestamp){let e=new Date(1e3*n.downgrade_timestamp).toISOString();i.setQueryData([o.Gn,t],n=>{if(n)return{...n,scheduled_downgrade:{base_price_in_minor_units:0,billing_interval:a.target_plan_type.includes("annual")?"yearly":"monthly",currency:"USD",date:e,plan_type:a.target_plan_type},has_schedule:!0}})}i.invalidateQueries({queryKey:[o.Gn,t]}),i.invalidateQueries({queryKey:[o._S,t]}),i.invalidateQueries({queryKey:[o.dZ,t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}function ea(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/cancel_subscription_downgrade"),"PUT",{...e,onSuccess(n,a,u){var r;i.setQueryData([o.Gn,t],e=>{if(e)return{...e,scheduled_downgrade:void 0,has_schedule:!1}}),i.invalidateQueries({queryKey:[o.Gn,t]}),i.invalidateQueries({queryKey:[o._S,t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}function et(e){let{activeOrganization:n}=(0,u.YL)();return(0,a.Sk)("/api/stripe/".concat(null==n?void 0:n.uuid,"/balance"),{queryKey:["stripe-balance",null==n?void 0:n.uuid],staleTime:18e5,enabled:!!n,...e})}function eu(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:n}=(0,u.YL)(),i=null==n?void 0:n.uuid;return(0,a.Sk)("/api/organizations/".concat(i,"/check_3ds_required"),{enabled:e&&!!n,queryKey:["check-3ds-required",i],meta:{noToast:!0},staleTime:864e5,refetchOnWindowFocus:!1,refetchOnMount:!1})}function er(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/verify_payment_method_3ds"),"POST",{...e,onSuccess(n,a,u){var r;i.invalidateQueries({queryKey:["check-3ds-required",t]}),i.invalidateQueries({queryKey:[o.Gn,t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}function el(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{activeOrganization:n}=(0,u.YL)(),i=null==n?void 0:n.uuid;return(0,a.Sk)("/api/organizations/".concat(i,"/retention_coupon_eligibility"),{enabled:e&&!!n,queryKey:["retention-coupon-eligibility",i],meta:{noToast:!0},staleTime:3e5,refetchOnWindowFocus:!1,refetchOnMount:!0})}function es(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/redeem_retention_coupon"),"POST",{...e,onSuccess(n,a,u){var r;n.success&&(i.invalidateQueries({queryKey:[o.Gn,t]}),i.invalidateQueries({queryKey:[o.MJ,t]})),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}let ed=()=>{let{activeOrganization:e}=(0,u.YL)(),n=(0,s.b)(c.Nt.BillingManage);return(0,a.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/seat_tier_options"),{enabled:!!e&&n})},eo=()=>{let e=(0,s.b)(c.Nt.BillingManage),n=(0,s.b)(c.Nt.BillingView),{data:i}=(0,b.U6)(),{data:a}=w({enabled:e&&n}),t=(null==i?void 0:i.seat_tier_quantities)||(null==a?void 0:a.seat_tier_quantities);if(!t)return[];let u=Object.keys(t);return u.includes("unassigned")?u:[...u,"unassigned"]},ec=()=>{let e=eo();return c.uK.some(n=>e.includes(n))};function ey(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/pause_subscription"),"PUT",{...e,onSuccess(n,a,u){var r;i.invalidateQueries({queryKey:[o.Gn,t]}),i.invalidateQueries({queryKey:[o._S,t]}),i.invalidateQueries({queryKey:[o.MJ,t]}),i.invalidateQueries({queryKey:[o.dZ,t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}function e_(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/unpause_subscription"),"PUT",{...e,onSuccess(n,a,u){var r;i.invalidateQueries({queryKey:[o.Gn,t]}),i.invalidateQueries({queryKey:[o._S,t]}),i.invalidateQueries({queryKey:[o.MJ,t]}),i.invalidateQueries({queryKey:[o.dZ,t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}function ev(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(i,"/subscription/preview_seat_purchase"),"POST",{...e,enabled:!!n})}let ep=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{addError:n}=(0,r.Y)(),{activeOrganization:i}=(0,u.YL)(),s=(0,t._r)(),d=(0,_.useQueryClient)(),c=null==i?void 0:i.uuid;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/subscription/purchase_seats"),"POST",{...e,onSuccess(n,a,u){var r;i.invalidateQueries({queryKey:[o.Gn,t]}),i.invalidateQueries({queryKey:[o.MJ,t]}),i.invalidateQueries({queryKey:[o._S,t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})}({...e,async onSuccess(i,a,t){var u,r,y,_;if(i.client_secret){let u=await (0,l.nW)(i.entity,s);if(!u){n("Stripe failed to initialize. You can try again."),null==(y=e.onError)||y.call(e,Error("Stripe failed to initialize. You can try again."),a,t);return}let v=await u.confirmPayment({clientSecret:i.client_secret,redirect:"if_required"});if(v.error){n("Payment confirmation failed. You can try again.",{error:v.error}),null==(_=e.onError)||_.call(e,Error("Payment confirmation failed. You can try again."),a,t);return}d.invalidateQueries({queryKey:[o.Gn,c]}),d.invalidateQueries({queryKey:[o.MJ,c]}),d.invalidateQueries({queryKey:[o._S,c]}),await (null==(r=e.onSuccess)?void 0:r.call(e,i,a,t));return}d.invalidateQueries({queryKey:[o.Gn,c]}),d.invalidateQueries({queryKey:[o.MJ,c]}),d.invalidateQueries({queryKey:[o._S,c]}),await (null==(u=e.onSuccess)?void 0:u.call(e,i,a,t))}})},em=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/address"),"PUT",{...e,onSuccess:(n,a,u)=>{var r;i.invalidateQueries({queryKey:["organization-addresses",t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})},eg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:n}=(0,u.YL)(),i=(0,_.useQueryClient)(),t=null==n?void 0:n.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/address"),"PUT",{...e,onSuccess:(n,a,u)=>{var r;i.invalidateQueries({queryKey:["organization-addresses",t]}),null==(r=e.onSuccess)||r.call(e,n,a,u)},enabled:!!n})};function eb(){let{activeOrganization:e}=(0,u.YL)();return(0,a.Sk)("/api/organizations/".concat(null==e?void 0:e.uuid,"/address"),{queryKey:["organization-addresses",null==e?void 0:e.uuid],enabled:!!(null==e?void 0:e.uuid)})}}}]);